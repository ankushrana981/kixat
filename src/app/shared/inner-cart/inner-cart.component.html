<section class="py-2 cart position-relative">
    <app-loader *ngIf="isLoading"></app-loader>
    <ng-container *ngIf="cart?.items?.length==0 && !isLoading; else cartData">
        <div class="p-3 success bg-success-light rounded-3 mt-5 font18 wt-600 w-50 mx-auto">
            <i [innerHTML]="icons.tick | safeHtml"></i> Your cart is empty
        </div>
    </ng-container>

    <ng-template #cartData>
        <div class="container mb-md-5" *ngIf="!isLoading">
            <app-loader *ngIf="pageLoader"></app-loader>
            <span class="wt-800 font25 my-md-4 pt-md-2 d-block">
                عربة التسوق ({{cart?.items?.length}})
            </span>
            <div class="row my-4">
                <div class="col-md-8">
                    <div class="card p-md-4 p-0">
                        <ul class="list-group list-group-flush p-0">
                            <li class="list-group-item p-3 p-md-0 pb-md-2 mb-2" *ngFor="let data of cart?.items">
                                <div class="row py-2">
                                    <div class="col-md-5 d-flex ps-md-0 pb-2">
                                        <div class="image col-4">
                                            <img class="img-thumbnail" src="{{baseUrl+data.productImage}}" onError="this.src='assets/icons/favicon.svg'" alt="{{data.productName}}">
                                        </div>
                                        <div class="col-8 align-self-center mx-3">
                                            <p class="wt-500 font16 mb-0 mb-md-3">{{data.productName}}</p>
                                            <div class="d-flex align-items-center">
                                                <label for="staticEmail2" class="content-light">{{data?.descrp || 'N/A'}}</label>
                                                <span class="bg-light p-2 rounded mx-2 wt-500 font16">{{data?.descrpInfo || 'N/A'}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 text-center align-self-center d-flex justify-content-md-center">
                                        <form>
                                            <button (click)="increaseQuantity(data)" class="border-0 bg-white p-0" type="button">
                                                <i class="me-1" [innerHTML]="icons.plusRed | safeHtml"></i>
                                            </button>
                                            <input class="wt-700 font14 border-0 text-center quantity" value="{{data.quantity}}">
                                            <button (click)="decreaseQuantity(data)" class="border-0 bg-white  p-0" type="button">
                                                <i class="me-1" [innerHTML]="icons.minus | safeHtml"></i>
                                            </button>
                                        </form>
                                    </div>
                                    <div class="col-md-3 align-self-center mt-3 mt-md-0">
                                        <p class="content-light mb-1 font16 wt-500">سعر المنتج الواحد</p>
                                        <p class="d-flex justify-content-between wt-700 font20 theme-color mb-1">
                                            <span class="font20">{{data.totalString}}</span>
                                            <span class="p-1 rounded font14 wt-700 bg-primaryLight">{{data?.discount || '0.00'}}</span>
                                        </p>
                                        <p class="content-light mb-1 font16 wt-500 text-decoration-line-through">
                                            {{data.productPriceString}}</p>
                                    </div>
                                </div>
                                <div class="mx-md-0 mx-0 row bg-light rounded p-md-2 py-3 py-0 mb-2 justify-content-start justify-content-md-between">
                                    <div class="col-md-2 d-flex ps-2 justify-content-center">
                                        <div class="text-secondary p-2 bg-secondaryLight rounded wt-600">شحن مجاني</div>
                                    </div>
                                    <div class="col-md-8 align-self-center border-end border-start content-light">
                                        <div class="d-flex my-2 my-md-0">
                                            <a (click)="addWishlist(data)" class="action-btn mx-md-3 text-decoration-none content-light d-flex me-2 cursor">
                                                <i class="me-1" [innerHTML]="icons.like | safeHtml"></i>حفظ لوقت لاحق</a>
                                            <a class="action-btn text-decoration-none content-light d-flex ms-2 ms-md-0 cursor" (click)="removeItem(data.id)">
                                                <i class="me-1 " [innerHTML]="icons.delete | safeHtml"></i>إزالة المنتج من العربة</a>
                                        </div>
                                    </div>
                                    <div class="col-md-2 align-self-center">
                                        <div class="d-flex align-items-center font12 wt-600 justify-content-center">
                                            <label class="content-light">البائع:</label>
                                            <span class="mx-2 content-main">Sara Store</span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <span class="wt-600 font12 theme-color mt-3 d-inline-block">
                <i class="me-1" [innerHTML]="icons.next | safeHtml"></i> متابعة التسوق
            </span>
                </div>

                <div class="col-md-4 activation mt-4 mt-md-0">

                    <div class="card bg-extra-light p-3 border-0">
                        <span class="wt-600 font20">
                            <i class="me-1" [innerHTML]="icons.coupon | safeHtml"></i> هل لديك كوبون خصم؟
                        </span>
                        <div class="card-body px-0">
                            <form [formGroup]="couponForm" (ngSubmit)="onSubmit()">
                                <div class="input-group wt-600 font18 mb-2">
                                    <input formControlName="coupon" type="text" class="form-control border-0 rounded-3" placeholder="اضف الكوبون هنا" aria-label="Recipient's username" aria-describedby="basic-addon2">
                                    <button [disabled]="couponForm.invalid" type="submit" class="input-group-text button border-0 rounded-3 text-white theme-bg rounded" id="basic-addon2"> تفعيل </button>

                                </div>
                                <span class="text-warn font18 wt-500 text-danger" *ngIf="showError">
                                    <i class="me-1" [innerHTML]="icons.cross | safeHtml"></i>الكوبون الذي ادخلته خاطئ
                                </span>
                            </form>
                        </div>
                        <ul class="list-group list-group-flush p-0">
                            <li class="list-group-item pt-3 p-0 content-main bg-extra-light">
                                <span class="wt-600 font20">
                                    <i class="me-1" [innerHTML]="icons.package | safeHtml"></i>ملخص الطلبات
                                </span>
                                <div class="d-flex justify-content-between pt-3">
                                    <p class="wt-500 font18">المجموع الفرعي </p>
                                    <p class="wt-600 font20"> {{cart?.subTotalString}}</p>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <p class="wt-500 font18">مصاريف الشحن</p>
                                    <p class="wt-600 font20"> {{cart?.shippingAmountString}}</p>
                                </div>
                                <div *ngIf="success" class="d-flex justify-content-between">
                                    <p class="wt-500 font18">كوبون الخصم</p>
                                    <p class="wt-600 font20 success">-25 ج.م</p>
                                </div>
                            </li>
                            <li class="list-group-item py-4 p-0 bg-extra-light">
                                <div class="d-flex justify-content-between m-0">
                                    <p class="wt-600 font20 m-0">الإجمالي</p>
                                    <p class="wt-800 font25 m-0">{{cart?.orderTotalString}}</p>
                                </div>
                            </li>
                            <button [routerLink]="['/checkout']" type="button" class="btn button text-white theme-bg border-0 font14">إتمام
                                الشراء</button>
                        </ul>
                    </div>

                </div>
            </div>
        </div>
    </ng-template>
</section>